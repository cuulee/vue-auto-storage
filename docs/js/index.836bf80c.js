(function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/vue-auto-storage/",r(r.s=0)})({0:function(e,t,r){e.exports=r("c31f")},"42b1":function(e,t,r){"use strict";var o=r("e417"),n=r.n(o);n.a},"5e1d":function(e,t,r){"use strict";var o=r("88d4"),n=r.n(o);n.a},"5f72":function(e,t){e.exports=ELEMENT},6389:function(e,t){e.exports=VueRouter},7264:function(e,t,r){},"88d4":function(e,t,r){},"8bbf":function(e,t){e.exports=Vue},b238:function(e,t,r){"use strict";var o=r("7264"),n=r.n(o);n.a},c31f:function(e,t,r){"use strict";r.r(t);var o=r("8bbf"),n=r.n(o),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("router-view",{attrs:{id:"app"}})},i=[],l={},s=l;r("42b1");function c(e,t,r,o,n,a,i,l){var s,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=r,c._compiled=!0),o&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),i?(s=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=s):n&&(s=l?function(){n.call(this,this.$root.$options.shadowRoot)}:n),s)if(c.functional){c._injectStyles=s;var u=c.render;c.render=function(e,t){return s.call(t),u(e,t)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,s):[s]}return{exports:e,options:c}}var u=c(s,a,i,!1,null,null,null),f=u.exports,m=r("6389"),d=r.n(m),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"demo-page"},[e._m(0),e._m(1),r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"活动区域"}},[r("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},[r("el-option",{attrs:{label:"区域一",value:"shanghai"}}),r("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),r("el-form-item",{attrs:{label:"即时配送"}},[r("el-switch",{model:{value:e.form.delivery,callback:function(t){e.$set(e.form,"delivery",t)},expression:"form.delivery"}})],1),r("el-form-item",{attrs:{label:"活动性质"}},[r("el-checkbox-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[r("el-checkbox",{attrs:{label:"美食/餐厅线上活动",name:"type"}}),r("el-checkbox",{attrs:{label:"地推活动",name:"type"}}),r("el-checkbox",{attrs:{label:"线下主题活动",name:"type"}}),r("el-checkbox",{attrs:{label:"单纯品牌曝光",name:"type"}})],1)],1),r("el-form-item",{attrs:{label:"特殊资源"}},[r("el-radio-group",{model:{value:e.form.resource,callback:function(t){e.$set(e.form,"resource",t)},expression:"form.resource"}},[r("el-radio",{attrs:{label:"线上品牌商赞助"}}),r("el-radio",{attrs:{label:"线下场地免费"}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.handleClearCurrent}},[e._v("清空当前表单缓存")]),r("el-button",{attrs:{type:"warning"},on:{click:e.handleClearAll}},[e._v("清空所有缓存")])],1)],1),e._m(2),r("el-form",{attrs:{"label-width":"80px"}},[r("el-form-item",{attrs:{label:"活动名称"}},[r("el-input",{model:{value:e.deepObj.form,callback:function(t){e.$set(e.deepObj,"form",t)},expression:"deepObj.form"}})],1)],1)],1)},h=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",[r("h1",[e._v("Demo 1")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h2",[r("i",{staticClass:"el-icon-goods"}),e._v("\n    表单一：\n  ")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("h2",{staticStyle:{"margin-top":"40px"}},[r("i",{staticClass:"el-icon-goods"}),e._v("\n    表单二：\n  ")])}],_={name:"Demo1",autoStorage:["form","deepObj.form"],data(){return{form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},deepObj:{form:""}}},methods:{handleClearCurrent(){this.$autoStorage.clear("form")},handleClearAll(){this.$autoStorage.clear()}},created(){},beforeDestroy(){}},v=_,b=(r("5e1d"),c(v,p,h,!1,null,null,null)),g=b.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"demo-page"},[e._m(0),e._l(e.form,function(t,o){return r("section",{key:o},[r("header",[r("h2",{staticStyle:{"margin-top":"40px"}},[r("i",{staticClass:"el-icon-goods"}),e._v(" 表单 "+e._s(o+1)+"：\n      ")])]),r("el-form",{ref:"form",refInFor:!0,attrs:{model:t,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"活动名称"}},[r("el-input",{model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"item.name"}})],1),r("el-form-item",{attrs:{label:"即时配送"}},[r("el-switch",{model:{value:t.delivery,callback:function(r){e.$set(t,"delivery",r)},expression:"item.delivery"}})],1)],1)],1)}),r("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],2)},S=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",[r("h1",[e._v("Demo 2")])])}],$={name:"Demo2",autoStorage:["form","form2","form3"],data(){return{form:[{name:"",delivery:!1}]}},methods:{handleAdd(){this.form.push({name:"",delivery:!1})}},beforeCreate(){},created(){},beforeDestroy(){}},O=$,x=(r("b238"),c(O,y,S,!1,null,null,null)),w=x.exports,C=new d.a({routes:[{path:"/",redirect:"/demo-1"},{path:"/demo-1",component:g},{path:"/demo-2",component:w}]}),E=r("5f72"),I=r.n(E);const T=Symbol("STORAGE"),j=Symbol("UNWATCH_FNS"),k=Symbol("PREFIX"),A=Symbol("DEBOUNCE_TIME");function N(e){try{return e.setItem("@@",1),1!==e.getItem("@@")?!1:(e.removeItem("@@"),!0)}catch(e){return!1}}function R(e){return Object.prototype.toString.call(e).slice(8,-1)}function P(e){const t=/(\[\w+\])$/g;if(t.test(e)){const t=e.lastIndexOf("[");return[e.slice(0,t),e.slice(t+1,-1)]}{const t=e.lastIndexOf(".");return[e.slice(0,t),e.slice(t+1)]}}function U(e,t=300){let r;return function(...o){r&&clearTimeout(r),r=setTimeout(()=>{e.apply(this,o)},t)}}function D(e,t,r){t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");const o=t.split(".");for(const n of o){if(!(n in e))return r;e=e[n]}return e}const M="__AUTO_STORAGE__";class V{constructor(e){this.$vm=e,this[j]=Object.create(null),this[T]=e.__AUTO_STORAGE_OPTIONS__.storage,this[A]=e.__AUTO_STORAGE_OPTIONS__.debounce,this[k]=M+e.$options.name.toUpperCase()+"__"}getName(e){return this[k]+e.toUpperCase()}getItem(e){return this[T].getItem(this.getName(e))}watch(e){e&&(this[j][e]||(this[j][e]=this.$vm.$watch(e,U(t=>{this[T].setItem(this.getName(e),t)},this[A]),{deep:!0})))}unwatch(e){if(void 0===e){for(const e in this[j])this[j][e]();delete this[j],this[j]=Object.create(null)}else e&&e in this[j]&&(this[j][e](),delete this[j][e])}clear(e){e?this[T].removeItem(this.getName(e)):this[T].clear(M)}destroy(){this.unwatch(),delete this.$vm,delete this[k],delete this[T],delete this[A]}}const G=/(\.|\[|\])/g;function F(e){"Array"===R(e.$options.autoStorage)&&e.$options.name&&(e.$autoStorage||(e.$autoStorage=new V(e),J(e),H(e)))}function X(e){e.$autoStorage&&(e.$autoStorage.destroy(),delete e.$autoStorage)}function J(e){const t=e.$options.autoStorage;for(const r of t){const t=e.$autoStorage.getItem(r);void 0!==t&&B(e,r,t)}}function B(e,t,r){if(G.test(t)){const[o,n]=P(t),a=D(e,o);a[n]=r}else e[t]=r}function H(e){const t=e.$options.autoStorage;for(const r of t)void 0!==D(e,r)&&e.$autoStorage.watch(r)}var L={created(){try{F(this)}catch(e){console.error(e)}},beforeDestroy(){X(this)}};const W=window.localStorage;var q={setItem(e,t){W.setItem(e,JSON.stringify(void 0===t?null:t))},getItem(e){const t=W[e];return void 0===t?void 0:JSON.parse(t)},removeItem(e){W.removeItem(e)},clear(e){if(e)for(const t of Object.keys(W))-1!==t.indexOf(e)&&W.removeItem(t);else W.clear()}};const z={debounce:300,storage:q},K={install(e,t={}){for(const r in t)z[r]=t[r];if(!N(z.storage))throw new Error("Invalid storage instance given");Object.defineProperty(e.prototype,"__AUTO_STORAGE_OPTIONS__",{value:z}),e.mixin(L)}};"undefined"!==typeof window&&window.Vue&&window.Vue.use(K);var Q=K;n.a.config.productionTip=!1,n.a.use(I.a),n.a.use(Q),new n.a({router:C,render:e=>e(f)}).$mount("#app")},e417:function(e,t,r){}});
//# sourceMappingURL=index.836bf80c.js.map